PROGRAM N1GABRIELJESUS23;
//GABRIEL JESUS PERES

//23) FUP que leia dia, mês e ano de nascimento, após leia dia, mês e ano do dia de hoje. Após calcule e mostre a idade em anos, em meses e em dias. (Ex.:15 anos, 3 meses e 7 dias).

var dia,mes,ano,ndia,nmes,nano:integer; //variáveis para data atual e data de nasc.
resdia,resmes,resano,bissexto:integer; //variáveis para cálculo de idade

Begin

//recebimento de dados básicos  
  write('Digite o dia atual: ');
  read(dia);
  while (dia<1) or (dia>31) do
  begin
    write('Insira dia válido: ');
    read(dia);
  end;
  
  write('Digite o mês atual: ');
  read(mes);
  while (mes<1) or (mes>12) do
  begin
    write('Insira mês válido: ');
    read(mes);
  end;
  
  write('Digite o ano atual: ');
  read(ano);
  while (ano<1910) or (ano>2020) do
  begin
    write('Insira ano válido: ');
    read(ano);
  end;
  
  write('Digite o dia de nascimento: ');
  read(ndia);
  while (ndia<1) or (ndia>31) do
  begin
    write('insira dia válido: ');
    read(ndia);
  end;
  
  write('Digite o mês de nascimento: ');
  read(nmes);
  while (nmes<1) or (nmes>12) do
  begin
    write('insira mês válido: ');
    read(nmes);
  end;
  
  write('Digite o ano de nascimento: ');
  read(nano);
  while (nano<1910) or (nano>2020) do //valida nascimentos válidos
  begin
    write('Insira um ano válido: ');
    read(nano);
  end;
  while (nano>ano) do //valida idade não-negativa
  begin
    write('Seu ano de nascimento não pode ser maior que o ano atual, repita o ano de nascimento: ');
    read(nano);
  end;
  
//fim do recebimento de dados e verificações básicas
  
  //verificar se é bissexto
  
  if (mes=2) then
  begin
    if (ano mod 4 = 0) and (ano mod 100 <> 0) then
    bissexto:=1
    else if (ano mod 100 = 0) and (ano mod 400 = 0) then
    bissexto:=1
    else
    bissexto:=0;
    //ano bissexto = 1 - não bissexto = 0
    
    if (bissexto=1) then //validação dos dias em fevereiro de ano bissexto
    begin
      while (dia>29) do
      begin
        write('Digite um dia válido para fevereiro (bissexto): ');
        read(dia);
      end;
      while (ndia>29) do
      begin
        write('Digite um dia de nascimento válido para fevereiro (bissexto): ');
        read(ndia);
      end;
    end
    else //começa validação dos dias em fevereiro, caso seja ano não-bissexto
    while (dia>28) do
    begin
      write('Digite dia válido para fevereiro: ');
      read(dia);
    end;
    while (ndia>28) do
    begin
      write('Digite dia de nascimento válido para fevereiro: ');
      read(ndia);
    end;
  end //fim de caso seja fevereiro
  
  else if (mes=4) or (mes=6) or (mes=9) or (mes=11)then //valida se é mês com 30 dias
  begin
    while (dia>30) do
    begin
      write('Digite um dia válido para o mês indicado (até 30 dias): ');
      read(dia);
    end;
  end
  else //valida se é mês com 31 dias
  begin
    while (ndia>31) do
    begin
      write('Digite um dia válido para o mês indicado (até 31 dias): ');
      read(ndia);
    end;
  end;
  
  //cálculos básicos
  resano:=ano-nano;
  resmes:=mes-nmes;
  resdia:=dia-ndia;
  
  if (resmes<=0) and (resdia>=0) then //calc sem se preocupar com dia, só mês é negativo
  begin
    resano:=resano-1;
    resmes:=resmes+12;
  end
  
  else if (resdia<0) then //cálculos com dias negativos
  begin
    if (resmes<0) then //caso mês e dia seja negativo
    begin
      resano:=resano-1;
      resmes:=resmes+12;
      resmes:=resmes-1;
    end
    else //caso mês seja positivo e dia negativo
    resmes:=resmes-1;
    //finaliza cálculo de mês, abaixo realiza cálculo de dias
    if (mes=4) or (mes=6) or (mes=9) or (mes=11)then
    resdia:=resdia+30
    else
    resdia:=resdia+31; 
  end;
  
  write('Você tem: ', resano, ' ano(s), ', resmes, ' mês/meses, e ', resdia, ' dia(s) de idade.');
  
End.
